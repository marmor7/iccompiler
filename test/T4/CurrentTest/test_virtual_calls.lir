
######################
# Program workspace/IC_COMPILER/test/T4/CurrentTest/test_virtual_calls.ic
######################

######################
# STRING LITERALS
str0: "In Foo_rise"
str1: "In Foo_shine"
str2: "In Bar_rise"
str3: "In Bar_twinkle"
######################

######################
# DISPATCH VECTORS
_DV_Bar: [_Bar_rise,_Foo_shine,_Bar_twinkle]
_DV_Foo: [_Foo_rise,_Foo_shine]
######################

_Foo_rise:   # Method rise:
# Line 7: 
Move str0, R1 # assigning literal to reg
Library __println(R1),R2
# Line 8: 
Move x, R3
Library __printi(R3),R4
# Line 9: 
Move 2, R5
Move R5, R6
Return R6
Return 9999
_Foo_shine:   # Method shine:
# Line 13: 
Move str1, R7 # assigning literal to reg
Library __println(R7),R8
# Line 14: 
Move x, R9
Library __printi(R9),R10
# Line 15: 
Move 1, R11
Move R11, R12
Return R12
Return 9999
_ic_main:   # Main Method
# Line 19: 
Library __allocateObject(16),R13 # Allocation of Bar
MoveField _DV_Bar,R13.0 # Move field for DV pointer
Move R13, f_Foo_20
# Line 20: 
Move 1, R15
Move f_Foo_20, R16
VirtualCall R16.0(x=R15),R16
# Line 21: 
Move 2, R18
Move f_Foo_20, R19
VirtualCall R19.1(x=R18),R19
# Line 22: 
Library __allocateObject(12),R21 # Allocation of Foo
MoveField _DV_Foo,R21.0 # Move field for DV pointer
Move R21, f_Foo_20 # assigning val to loc
# Line 23: 
Move 4, R23
Move f_Foo_20, R24
VirtualCall R24.0(x=R23),R24
# Line 24: 
Move 5, R26
Move f_Foo_20, R27
VirtualCall R27.1(x=R26),R27
# Line 25: 
Library __allocateObject(16),R28 # Allocation of Bar
MoveField _DV_Bar,R28.0 # Move field for DV pointer
Move R28, b_Foo_20
# Line 26: 
Move 3, R30
Move b_Foo_20, R31
VirtualCall R31.2(x=R30),R31
Library __exit(0),Rdummy
# Method main end
Return 9999
_Bar_rise:   # Method rise:
# Line 34: 
Move str2, R32 # assigning literal to reg
Library __println(R32),R33
# Line 35: 
Move x, R34
Library __printi(R34),R35
# Line 36: 
Move 3, R36
Move R36, R37
Return R37
Return 9999
_Bar_twinkle:   # Method twinkle:
# Line 40: 
Move str3, R38 # assigning literal to reg
Library __println(R38),R39
# Line 41: 
Move x, R40
Library __printi(R40),R41
# Line 42: 
Move 4, R42
Move R42, R43
Return R43
Return 9999
